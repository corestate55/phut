#!/usr/bin/env ruby
# -*- coding: utf-8 -*-

$LOAD_PATH.unshift File.join(File.dirname(__FILE__), '..', 'lib')
require 'gli'
require 'phuture'

include GLI::App

program_desc 'Virtual network in seconds'

version Phuture::VERSION

command :run do |c|
  c.action do |global_options, options, args|
    configuration = Phuture::Parser.new.parse(IO.read(args[0]))
    configuration.vswitch.each do |each|
      each.run
    end
    configuration.vhost.each do |each|
      each.run
    end
  end
end

exit run(ARGV)
